ignis.home=ignis-server-parent/ignis-server
ignis.ui.home=ignis-ui/dist
ignis.ui.enabled=true
ignis.host=${IGNIS_HOST}
ignis.environment=
ignis.tmp.path=${ignis.home}/target

spring.main.banner-mode=off
spring.application.name=ignis

server.https.port=8443
server.http.port=8081
server.port=${server.https.port}

spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB

management.endpoints.web.exposure.include=health,info,metrics,togglz
management.endpoint.metrics.enabled=true
management.health.db.enabled=false
management.health.hadoop.enabled=true
management.endpoint.health.show-details=when_authorized

management.metrics.export.datadog.enabled=false

server.ssl.key-store-type=JKS
server.ssl.key-store=${ignis.home}/src/test/resources/conf/lrm.keystore
server.ssl.key-password=lombard119
server.ssl.key-store-password=lombard119

server.servlet.contextPath=/fcrengine/
server.tomcat.basedir=${ignis.home}/target/logs/access
server.tomcat.accesslog.enabled=true
server.tomcat.accesslog.pattern=%a %t %r: %s, %Dms => %Fms, %bB


spring.flyway.locations=\
  filesystem:${ignis.home}/../../ignis-db-migration/src/dbscript/sql/oracle,\
  classpath:com/lombardrisk/ignis/db/migration/oracle
spring.flyway.clean-on-validation-error=true
spring.flyway.check-location=false
spring.flyway.placeholders.USER_APP_RW_ROLE=IGNIS$RW_ROLE
spring.flyway.placeholders.ADMIN_USER=admin
spring.flyway.placeholders.ADMIN_PASSWORD=$2a$10$AGVu4qjfE/GkfrE/qy8lqefdGY/OOxxTkAgamc84z1tKWLir2/IJi
spring.flyway.placeholders.H2_MODE_FLAG=--
spring.flyway.installed-by=SpringBoot
spring.flyway.baseline-on-migrate=true

spring.datasource.url=jdbc:h2:./${ignis.home}/target/data/ignis-test;MODE=Oracle
spring.datasource.username=
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.tomcat.validationQuery=select 1 from DUAL
spring.datasource.db.schema=${spring.datasource.username}

spring.jpa.open-in-view=false
spring.jpa.show-sql=false
spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.Oracle12cDialect
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.generate_statistics=false
spring.batch.job.enabled=false


logging.file=${ignis.home}/target/logs/ignis.log
logging.config=src/test/resources/logback-test.xml
logging.pattern.console=%d{YYYY-MM-dd HH:mm:ss.SSS} %clr(%5p) %clr(%X{correlationId}){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n
logging.pattern.file=%d{YYYY-MM-dd HH:mm:ss.SSS} %clr(%5p) %clr(%X{correlationId}){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n


togglz.features-file=file:${ignis.home}/src/test/resources/conf/feature.file.properties
togglz.console.enabled=true
togglz.console.use-management-port=false
togglz.console.path=/togglz
togglz.console.secured=false
togglz.endpoint.enabled=true
togglz.endpoint.id=togglz


hadoop.user=test
hadoop.site.conf.yarn.nodemanager.pmem-check-enabled=false
hadoop.site.conf.yarn.nodemanager.vmem-check-enabled=false
hadoop.site.conf.fs.defaultFS=${env.hdfs.url}
hadoop.site.conf.hadoop.tmp.dir=${env.hdfs.url}/tmp
hadoop.site.conf.yarn.resourcemanager.hostname=${env.hostname}

env.hdfs.url=hdfs://${env.hostname}:9000

dataset.source.location.type=LOCAL
dataset.source.location.localPath=${ignis.home}/../../ignis-functional-test/src/main/resources/datasets
dataset.source.location.remotePath=${env.hdfs.url}/user/${hadoop.user}/datasets

phoenix.datasource.url=jdbc:phoenix:thin:url=http://${env.hostname}:8765;serialization=PROTOBUF
phoenix.datasource.driver-class-name=org.apache.phoenix.queryserver.client.Driver
phoenix.salt.bucket.count=1

job.user.name=InternalJobUser
job.user.password=!qod;a3p8if#_=@KV

spark.libs.path=${ignis.home}/../../ignis-server-installer/ignis-server-izpack-installer/target/installer/ignis-server-1.0.0-SNAPSHOT/lib/__spark_libs__.zip
spark.libs.copy=false

spark.drivers.staging.resource=${ignis.home}/../../ignis-spark/ignis-spark-staging/target/ignis-spark-staging.jar
spark.drivers.staging.mainClass=com.lombardrisk.ignis.spark.Application
spark.drivers.validation.resource=${ignis.home}/../../ignis-spark/ignis-spark-validation/target/ignis-spark-validation.jar
spark.drivers.validation.mainClass=${spark.drivers.staging.mainClass}
spark.drivers.pipeline.resource=${ignis.home}/../../ignis-spark/ignis-spark-pipeline/target/ignis-spark-pipeline.jar
spark.drivers.pipeline.mainClass=${spark.drivers.staging.mainClass}

spark.extra.jars.dir=${ignis.home}/../../ignis-spark/ignis-spark-script-demo/target/

zookeeper.urls=${env.hostname}
spark-defaults.conf.debug.mode=false
spark-defaults.conf.spark.history.ui.port=18080
spark-defaults.conf.spark.history.fs.logDirectory=${env.hdfs.url}/spark/app-logs
spark-defaults.conf.spark.submit.deployMode=cluster
spark-defaults.conf.spark.yarn.submit.waitAppCompletion=true
spark-defaults.conf.spark.yarn.maxAppAttempts=1
spark-defaults.conf.spark.yarn.historyServer.address=${env.hostname}:18080
spark-defaults.conf.spark.yarn.archive=${env.hdfs.url}/spark/lib/__spark_libs__.zip
spark-defaults.conf.spark.driver.memory=2G
spark-defaults.conf.spark.executor.memory=${spark-defaults.conf.spark.driver.memory}
spark-defaults.conf.spark.executor.cores=2
spark-defaults.conf.spark.executor.instances=${spark-defaults.conf.spark.executor.cores}
spark-defaults.conf.spark.default.parallelism=36
spark-defaults.conf.spark.hadoop.yarn.nodemanager.pmem-check-enabled=${hadoop.site.conf.yarn.nodemanager.pmem-check-enabled}
spark-defaults.conf.spark.hadoop.yarn.nodemanager.vmem-check-enabled=${hadoop.site.conf.yarn.nodemanager.vmem-check-enabled}
spark-defaults.conf.spark.hadoop.fs.defaultFS=${hadoop.site.conf.fs.defaultFS}
spark-defaults.conf.spark.hadoop.hadoop.tmp.dir=${hadoop.site.conf.hadoop.tmp.dir}
spark-defaults.conf.spark.hadoop.yarn.resourcemanager.hostname=${hadoop.site.conf.yarn.resourcemanager.hostname}
spark-defaults.conf.hadoop.user=${hadoop.user}
spark-defaults.conf.zookeeper.url=${zookeeper.urls}:2181
spark-defaults.conf.keystore.password=${server.ssl.key-store-password}
spark-defaults.conf.ignis.host=${ignis.host}
spark-defaults.conf.server.https.port=${server.https.port}
spark-defaults.conf.phoenix.salt.bucket.count=${phoenix.salt.bucket.count}
spark-defaults.conf.job.user.name=${job.user.name}
spark-defaults.conf.job.user.password=${job.user.password}
spark-defaults.conf.server.servlet.contextPath=fcrengine
spark-defaults.conf.spark.driver.extraJavaOptions=-Dlog4j.configuration=log4j.properties
spark-defaults.conf.spark.yarn.preserve.staging.files=false
#spark-defaults.conf.spark.driver.extraJavaOptions=-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=8585 -Dlog4j.configuration=log4j.properties
#spark-defaults.conf.spark.executor.extraJavaOptions=-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=8585

spark.log4j.file=${ignis.home}/src/test/resources/conf/log4j.properties
spark.yarn.app.tracking.resource.url=http://${env.hostname}:8088/cluster/app

export.dataset.page-size=100
export.dataset.max-records=500
