<div [formGroup]="formGroup" class="join-fields-container">
  <div class="join-fields-header">
    <h2 class="mat-h3">Join Fields</h2>
    <button
      mat-icon-button
      class="e2e-create-pipeline-step-add-join-field-button"
      (click)="addJoinField()"
      [disabled]="formGroup.disabled"
    >
      <mat-icon>add_circle</mat-icon>
    </button>
  </div>
  <div>
    <div
      class="join-fields-list__join"
      formArrayName="joinFields"
      *ngFor="
        let joinField of formGroupControls.joinFields.controls;
        let i = index
      "
    >
      <div class="field-form">
        <div class="join-field-form-container">
          <dv-join-field-form
            [formControl]="joinField"
            [leftSchemaFields]="leftSchema ? leftSchema.fields : []"
            [rightSchemaFields]="rightSchema ? rightSchema.fields : []"
          >
          </dv-join-field-form>
        </div>
        <button
          class="join-fields-button"
          *ngIf="!(i == 0 && formGroupControls.joinFields.controls.length == 1)"
          mat-button
          (click)="removeJoinField(i)"
          [disabled]="formGroup.disabled"
        >
          <mat-icon>close</mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>
