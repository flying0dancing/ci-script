<div class="joins-container" [formGroup]="formGroup">
  <div class="joins-header">
    <h2 class="mat-h3">Joins</h2>
    <button
      mat-icon-button
      (click)="addJoin()"
      [disabled]="formGroup.disabled"
      class="e2e-create-pipeline-step-add-join-button"
    >
      <mat-icon>add_circle</mat-icon>
    </button>
  </div>
  <div class="joins-scroll-container">
    <div
      class="joins-list__join"
      formArrayName="joins"
      *ngFor="let join of formGroupControls.joins.controls; let i = index"
    >
      <mat-card>
        <mat-card-content>
          <dv-single-join-form
            class="e2e-create-pipeline-step-single-join-form"
            [formControl]="join"
            [displayIndex]="i"
            [schemas]="schemas"
            [joinTypes]="joinTypes"
          >
          </dv-single-join-form>

          <mat-card-actions align="end">
            <button
              *ngIf="!(i == 0 && formGroupControls.joins.controls.length == 1)"
              mat-button
              color="warn"
              (click)="removeJoin(i)"
              [disabled]="formGroup.disabled"
            >
              <mat-icon>delete</mat-icon>
              REMOVE
            </button>
          </mat-card-actions>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
