<div [formGroup]="formGroup">
  <mat-card class="select-card-container" *ngIf="formGroupControls.outputField.value">
    <dv-pipeline-select-editor
      [editorControl]="formGroupControls.select"
      [editorLabel]="formGroupControls.outputField.value.name"
      [schemas]="[inputSchema]"
      [error]="!!selectResult"
    >
    </dv-pipeline-select-editor>

    <mat-checkbox
      [formControlName]="formControlNames.hasWindow"
      class="is-window-checkbox"
    >
      Window
    </mat-checkbox>

    <div class="intermediate-container">

      <mat-checkbox
        [formControlName]="formControlNames.intermediateResult"
        class="is-intermediate-checkbox"
      >
        Intermediate Result
      </mat-checkbox>

      <dv-inline-edit class="order-container"
                      label="Order"
                      [ngClass]="formGroupControls.intermediateResult.value ? '' : 'hidden-order'"
                      [required]="true"
                      type="number"
                      [initialValue]="formGroupControls.order.value"
                      [editFunction]="editOrderFn"
      >
      </dv-inline-edit>
    </div>
    <button
      matTooltip="Open in dialog"
      mat-icon-button
      (click)="expand(displayIndex, formGroupControls.outputField.value)"
      class="expand-select-window-button"
    >
      <mat-icon>open_in_new</mat-icon>
    </button>

    <dv-partitions-form
      *ngIf="formGroupControls.hasWindow.value"
      [formControl]="formGroupControls.partitions"
      [inputSchema]="inputSchema"
    >
    </dv-partitions-form>

    <dv-orders-form
      *ngIf="formGroupControls.hasWindow.value"
      [formControl]="formGroupControls.orderBys"
      [inputSchema]="inputSchema"
    >
    </dv-orders-form>

    <ul class="error-list">
      <li *ngFor="let err of (!selectResult ? []: selectResult.errors)">
        <b>{{ err.errorCode }}</b> -
        <p *ngFor="let errorMessageLine of newLineToArray(err.errorMessage)">
          {{errorMessageLine}} <br/>
        </p>
      </li>
    </ul>
  </mat-card>
</div>
