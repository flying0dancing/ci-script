<div class="selects-container" [formGroup]="formGroup">

  <div class="selects-title-container">
    <h2 class="mat-h3" [ngClass]="hasSelectErrors() ? 'error-selects': ''">Selects
      <mat-icon inline *ngIf="hasSelectErrors()">error</mat-icon>
    </h2>

    <mat-checkbox class="focus-select-errors" (change)="onShowErrors($event)" *ngIf="hasSelectErrors()">
      Only Show Errors
    </mat-checkbox>
  </div>
  <div class="selects-filter-container">
    <mat-form-field class="selects-filter-control selects-filter-input">
      <input matInput
             (input)="onFilter($event.target.value)"
             [disabled]="formGroup.disabled"
             [value]="pagingService.currentFilter"
             placeholder="Filter"
             class="e2e-filter-selects-input"/>
    </mat-form-field>


    <mat-paginator class="selects-filter-control e2e-create-pipeline-step-select-input-paginator" #paginator
                   [length]="pagingService.length"
                   [pageSize]="pageSize"
                   [pageSizeOptions]="pageSizeOptions"
                   [pageIndex]="pagingService.currentPage"
                   [showFirstLastButtons]="true"
                   (page)="onPage($event)">
    </mat-paginator>
  </div>

  <button mat-mini-fab color="primary" class="autofill-button map" matTooltip="Attempt auto-fill"
          *ngIf="outputFields.length > 0"
          [disabled]="formGroup.disabled"
          (click)="attemptAutoFill()">
    <mat-icon>move_to_inbox</mat-icon>
  </button>

  <div class="selects-scroll-container">

    <div
      class="window-select-container"
      formArrayName="selects"
      *ngFor="let select of pagingService.getPagedSelectsControls(); let i = index"
    >
      <dv-single-select-form
        *ngIf="!allowWindow"
        [formControl]="select"
        [displayIndex]="i"
        [inputSchemas]="inputSchemas"
        [unionSchemaIn]="unionSchemaIn"
        [showOrder]="showOrder"
        [selectResult]="getSelectError(select.value.outputFieldId)"
        (changeOrder)="onChangeOrder($event)"
      >
      </dv-single-select-form>

      <dv-single-window-select-form
        *ngIf="allowWindow"
        [formControl]="select"
        [displayIndex]="outputFieldIndex(i)"
        [selectResult]="getSelectError(select.value.outputFieldId)"
        [inputSchema]="
          inputSchemas.length > 0 ? inputSchemas[0] : { fields: [] }
        "
        (changeOrder)="onChangeOrder($event)"

      >
      </dv-single-window-select-form>


    </div>


  </div>
</div>
